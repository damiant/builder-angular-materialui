# Timepicker Component

## Overview

### Purpose

Use this component to generate timepicker functionality

### When to Use

The Timepicker component is essential for collecting time-based input in forms and applications requiring precise time selection. Use it when you need to:

- **Form time inputs** - Collect appointment times, meeting schedules, and event start/end times in forms
- **Scheduling interfaces** - Enable users to set times for calendar events, reminders, and recurring tasks
- **Time-sensitive workflows** - Capture deadlines, time constraints, and temporal requirements in business processes
- **User preferences** - Allow users to configure notification times, automatic backups, and scheduled actions
- **E-commerce transactions** - Gather delivery time preferences, service appointment windows, and booking slots
- **Data filtering and search** - Enable time-based filtering for logs, reports, and historical data analysis
- **Accessibility-compliant time selection** - Provide keyboard navigation and screen reader support for time input
- **Mobile-friendly time entry** - Offer touch-optimized time selection for mobile applications
- **Real-time applications** - Set time parameters for live streaming, scheduled broadcasts, and time-dependent features
- **International time handling** - Support various time formats, 12/24-hour displays, and timezone considerations

### Architecture

**No Coupling**: The Timepicker component is a standalone component that enhances time input functionality. It works independently but integrates seamlessly with Angular Material's FormField component for enhanced styling, labeling, and validation display.

### Component Interdependencies

The Timepicker component demonstrates no coupling as it is a standalone component that:

- **Direct application**: Can be used independently as a complete time selection interface
- **FormField integration**: Optionally works within `mat-form-field` for enhanced styling, labeling, and error handling
- **Form integration**: Seamlessly integrates with Angular Reactive Forms and Template-driven Forms
- **Input enhancement**: Can be connected to input elements via the `matTimepicker` directive for enhanced functionality

## Components

### MatTimepicker {Standalone Component}

A comprehensive time selection component that provides an intuitive interface for choosing hours, minutes, and optional seconds with support for both 12-hour and 24-hour formats.

**Purpose:** Offers a complete time picking solution with dropdown or dialog interfaces, customizable time intervals, validation support, and accessibility features for consistent time input across applications.

**Interface:**

```typescript
interface MatTimepicker {
  // Time Configuration
  format?: "12" | "24"; // Time format (12-hour with AM/PM or 24-hour)
  interval?: number; // Time increment in minutes (default: 15)
  showSeconds?: boolean; // Whether to include seconds selection
  defaultTime?: string; // Default time value in HH:mm or HH:mm:ss format

  // Appearance and Behavior
  disabled?: boolean; // Controls whether the timepicker is disabled
  readonly?: boolean; // Makes the timepicker read-only
  placeholder?: string; // Placeholder text for the input
  appearance?: "legacy" | "standard" | "fill" | "outline"; // Material form field appearance

  // Validation
  min?: string; // Minimum selectable time (HH:mm format)
  max?: string; // Maximum selectable time (HH:mm format)
  required?: boolean; // Indicates if time selection is required
  timeFilter?: (time: string) => boolean; // Custom function to filter available times

  // Events
  timeChange: EventEmitter<string>; // Emitted when time selection changes
  opened: EventEmitter<void>; // Emitted when timepicker opens
  closed: EventEmitter<void>; // Emitted when timepicker closes

  // Methods
  open(): void; // Programmatically open the timepicker
  close(): void; // Programmatically close the timepicker
  focus(): void; // Focus the timepicker input
}

interface TimeChangeEvent {
  value: string; // Selected time in HH:mm or HH:mm:ss format
  source: MatTimepicker; // Reference to the timepicker instance
}
```

**Usage Example:**

```tsx
import { MatTimepicker } from '@angular/material/timepicker';
import { MatFormFieldModule } from '@angular/material/form-field';

// Basic timepicker with form field
function BasicTimepickerExample() {
  selectedTime = '10:30';

  onTimeChange(event: TimeChangeEvent) {
    console.log('Selected time:', event.value);
  }

  return (
    <mat-form-field>
      <mat-label>Select Time</mat-label>
      <input matInput [matTimepicker]="timePicker" [(ngModel)]="selectedTime">
      <mat-timepicker-toggle matSuffix [for]="timePicker"></mat-timepicker-toggle>
      <mat-timepicker
        #timePicker
        format="12"
        [interval]="15"
        (timeChange)="onTimeChange($event)">
      </mat-timepicker>
    </mat-form-field>
  );
}

// Standalone timepicker without form field
function StandaloneTimepickerExample() {
  appointmentTime = '';

  return (
    <mat-timepicker
      [(ngModel)]="appointmentTime"
      format="24"
      [interval]="30"
      placeholder="Select appointment time"
      class="appointment-timepicker">
    </mat-timepicker>
  );
}

// Advanced timepicker with validation
function ValidatedTimepickerExample() {
  meetingTime = '';

  // Only allow business hours (9 AM - 6 PM)
  businessHoursFilter = (time: string): boolean => {
    const [hours] = time.split(':').map(Number);
    return hours >= 9 && hours <= 18;
  };

  return (
    <mat-form-field>
      <mat-label>Meeting Time</mat-label>
      <input
        matInput
        [matTimepicker]="businessTimePicker"
        [(ngModel)]="meetingTime"
        required>
      <mat-error *ngIf="timeControl.hasError('required')">
        Meeting time is required
      </mat-error>
      <mat-timepicker-toggle matSuffix [for]="businessTimePicker"></mat-timepicker-toggle>
      <mat-timepicker
        #businessTimePicker
        format="12"
        min="09:00"
        max="18:00"
        [timeFilter]="businessHoursFilter"
        [interval]="15">
      </mat-timepicker>
    </mat-form-field>
  );
}
```

## Integration Patterns

### Basic Time Selection

```tsx
import { MatTimepicker } from '@angular/material/timepicker';
import { MatFormFieldModule } from '@angular/material/form-field';

// Simple time input with label
function BasicTimeInput() {
  return (
    <mat-form-field appearance="outline">
      <mat-label>Departure Time</mat-label>
      <input matInput [matTimepicker]="picker" placeholder="Select time">
      <mat-timepicker-toggle matSuffix [for]="picker"></mat-timepicker-toggle>
      <mat-timepicker #picker format="12" [interval]="15"></mat-timepicker>
    </mat-form-field>
  );
}
```

### Reactive Forms Integration

```tsx
import { FormControl, FormGroup, Validators } from '@angular/forms';

// Integration with Angular Reactive Forms
function ReactiveFormTimepicker() {
  scheduleForm = new FormGroup({
    startTime: new FormControl('', [Validators.required]),
    endTime: new FormControl('', [Validators.required]),
    breakTime: new FormControl('12:00'),
  });

  // Custom validator to ensure end time is after start time
  timeRangeValidator = (group: FormGroup) => {
    const start = group.get('startTime')?.value;
    const end = group.get('endTime')?.value;

    if (start && end) {
      return start < end ? null : { timeRange: true };
    }
    return null;
  };

  return (
    <form [formGroup]="scheduleForm" [validators]="timeRangeValidator">
      <mat-form-field>
        <mat-label>Start Time</mat-label>
        <input matInput [matTimepicker]="startPicker" formControlName="startTime" required>
        <mat-timepicker-toggle matSuffix [for]="startPicker"></mat-timepicker-toggle>
        <mat-timepicker #startPicker format="24" [interval]="30"></mat-timepicker>
        <mat-error *ngIf="scheduleForm.get('startTime')?.hasError('required')">
          Start time is required
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>End Time</mat-label>
        <input matInput [matTimepicker]="endPicker" formControlName="endTime" required>
        <mat-timepicker-toggle matSuffix [for]="endPicker"></mat-timepicker-toggle>
        <mat-timepicker #endPicker format="24" [interval]="30"></mat-timepicker>
        <mat-error *ngIf="scheduleForm.get('endTime')?.hasError('required')">
          End time is required
        </mat-error>
        <mat-error *ngIf="scheduleForm.hasError('timeRange')">
          End time must be after start time
        </mat-error>
      </mat-form-field>

      <mat-form-field>
        <mat-label>Break Time</mat-label>
        <input matInput [matTimepicker]="breakPicker" formControlName="breakTime">
        <mat-timepicker-toggle matSuffix [for]="breakPicker"></mat-timepicker-toggle>
        <mat-timepicker #breakPicker format="24" [interval]="15" defaultTime="12:00"></mat-timepicker>
      </mat-form-field>
    </form>
  );
}
```

### Advanced Time Picker Variations

```tsx
// 24-hour format with seconds
function PreciseTimePicker() {
  preciseTime = '';

  return (
    <mat-form-field>
      <mat-label>Precise Time</mat-label>
      <input matInput [matTimepicker]="precisePicker" [(ngModel)]="preciseTime">
      <mat-timepicker-toggle matSuffix [for]="precisePicker"></mat-timepicker-toggle>
      <mat-timepicker
        #precisePicker
        format="24"
        [interval]="1"
        [showSeconds]="true">
      </mat-timepicker>
    </mat-form-field>
  );
}

// Business hours constraint
function BusinessHoursTimePicker() {
  businessTime = '';

  return (
    <mat-form-field>
      <mat-label>Business Hours</mat-label>
      <input matInput [matTimepicker]="businessPicker" [(ngModel)]="businessTime">
      <mat-timepicker-toggle matSuffix [for]="businessPicker"></mat-timepicker-toggle>
      <mat-timepicker
        #businessPicker
        format="12"
        [interval]="15"
        min="09:00"
        max="17:00">
      </mat-timepicker>
      <mat-hint>Available between 9:00 AM and 5:00 PM</mat-hint>
    </mat-form-field>
  );
}

// Disabled state for display-only
function ReadOnlyTimePicker() {
  displayTime = '14:30';

  return (
    <mat-form-field>
      <mat-label>Scheduled Time</mat-label>
      <input matInput [matTimepicker]="readOnlyPicker" [(ngModel)]="displayTime" readonly>
      <mat-timepicker #readOnlyPicker disabled="true"></mat-timepicker>
      <mat-hint>This time cannot be modified</mat-hint>
    </mat-form-field>
  );
}
```

## Common Patterns

### Pattern 1: Form Field Integration

```tsx
// Recommended pattern for most timepicker usage
// Always wrap timepickers in mat-form-field for consistent styling and functionality
<mat-form-field appearance="outline">
  <mat-label>Time Label</mat-label>
  <input matInput [matTimepicker]="picker" placeholder="Select time" formControlName="timeField">
  <mat-timepicker-toggle matSuffix [for]="picker"></mat-timepicker-toggle>
  <mat-timepicker #picker format="12" [interval]="15"></mat-timepicker>
  <mat-hint>Choose your preferred time</mat-hint>
  <mat-error *ngIf="timeControl.hasError('required')">
    Time selection is required
  </mat-error>
</mat-form-field>
```

### Pattern 2: Time Format Variations

```tsx
// 12-hour format with AM/PM
<mat-timepicker #picker12 format="12" [interval]="15"></mat-timepicker>

// 24-hour format (military time)
<mat-timepicker #picker24 format="24" [interval]="30"></mat-timepicker>

// High precision with seconds
<mat-timepicker #precisionPicker format="24" [interval]="1" [showSeconds]="true"></mat-timepicker>

// Custom intervals
<mat-timepicker #intervalPicker format="12" [interval]="5"></mat-timepicker> // 5-minute intervals
<mat-timepicker #hourlyPicker format="24" [interval]="60"></mat-timepicker> // Hourly intervals
```

### Pattern 3: Time Constraints and Validation

```tsx
// Time range validation
<mat-timepicker
  #constrainedPicker
  format="12"
  min="08:00"
  max="20:00"
  [interval]="30">
</mat-timepicker>

// Custom time filtering (business hours only)
customTimeFilter = (time: string): boolean => {
  const [hours, minutes] = time.split(':').map(Number);
  const totalMinutes = hours * 60 + minutes;
  const startWork = 9 * 60; // 9:00 AM
  const endWork = 17 * 60; // 5:00 PM
  const lunchStart = 12 * 60; // 12:00 PM
  const lunchEnd = 13 * 60; // 1:00 PM

  return totalMinutes >= startWork &&
         totalMinutes <= endWork &&
         !(totalMinutes >= lunchStart && totalMinutes < lunchEnd);
};

<mat-timepicker
  #filteredPicker
  [timeFilter]="customTimeFilter"
  format="12">
</mat-timepicker>
```

## Best Practices

### Usage Guidelines

- **Always use with FormField**: Wrap timepickers in `mat-form-field` for consistent styling, proper labeling, and error handling
- **Choose appropriate format**: Use 12-hour format for general user interfaces and 24-hour format for technical or international applications
- **Set reasonable intervals**: Use 15 or 30-minute intervals for most scheduling applications to balance precision with usability
- **Provide clear labels**: Use `mat-label` for accessible, descriptive labels that explain the time input purpose
- **Include helpful hints**: Use `mat-hint` to provide context about time format, constraints, or expected usage

### Accessibility

- **Automatic ARIA handling**: MatTimepicker automatically manages ARIA attributes for screen reader compatibility
- **Keyboard navigation**: Support for arrow keys, Enter, Escape, and Tab navigation within the time picker
- **Label association**: Proper association between labels and time inputs for screen reader navigation
- **Error announcements**: Validation errors are announced to screen readers when they appear
- **Focus management**: Clear focus indicators and logical tab order through time selection interface

### Performance

- **Efficient time filtering**: Implement time filter functions efficiently as they're called for each selectable time option
- **Lazy loading**: Consider lazy loading of time options for timepickers with very small intervals
- **Change detection**: Use OnPush change detection strategy for components containing multiple timepickers
- **Memory management**: Properly unsubscribe from timepicker events in component cleanup to prevent memory leaks

### Form Integration

- **Reactive Forms recommended**: Use Angular Reactive Forms for better control over validation and form state
- **Custom validators**: Implement validators for time range validation, business logic, and cross-field dependencies
- **Error state matching**: Use consistent error handling patterns across time inputs in the same form
- **Form submission**: Handle form submission gracefully with proper loading states and error recovery

## Common Use Cases

### Appointment Scheduling

```tsx
// Medical appointment booking system
<form [formGroup]="appointmentForm">
  <mat-form-field>
    <mat-label>Preferred Appointment Time</mat-label>
    <input matInput [matTimepicker]="appointmentPicker" formControlName="appointmentTime" required>
    <mat-timepicker-toggle matSuffix [for]="appointmentPicker"></mat-timepicker-toggle>
    <mat-timepicker
      #appointmentPicker
      format="12"
      [interval]="15"
      min="08:00"
      max="17:00"
      [timeFilter]="availableTimesFilter">
    </mat-timepicker>
    <mat-error *ngIf="appointmentForm.get('appointmentTime')?.hasError('required')">
      Please select your preferred appointment time
    </mat-error>
  </mat-form-field>
</form>
```

### Work Schedule Management

```tsx
// Employee shift scheduling
<div [formGroup]="shiftForm">
  <mat-form-field>
    <mat-label>Shift Start</mat-label>
    <input matInput [matTimepicker]="startPicker" formControlName="shiftStart" required>
    <mat-timepicker-toggle matSuffix [for]="startPicker"></mat-timepicker-toggle>
    <mat-timepicker #startPicker format="24" [interval]="30"></mat-timepicker>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Shift End</mat-label>
    <input matInput [matTimepicker]="endPicker" formControlName="shiftEnd" required>
    <mat-timepicker-toggle matSuffix [for]="endPicker"></mat-timepicker-toggle>
    <mat-timepicker #endPicker format="24" [interval]="30"></mat-timepicker>
  </mat-form-field>
</div>
```

### Event Planning

```tsx
// Conference session timing
<mat-form-field>
  <mat-label>Session Duration</mat-label>
  <input matInput [matTimepicker]="durationPicker" formControlName="sessionDuration">
  <mat-timepicker-toggle matSuffix [for]="durationPicker"></mat-timepicker-toggle>
  <mat-timepicker
    #durationPicker
    format="24"
    [interval]="15"
    defaultTime="01:00"
    min="00:15"
    max="04:00">
  </mat-timepicker>
  <mat-hint>Session duration between 15 minutes and 4 hours</mat-hint>
</mat-form-field>
```

### System Configuration

```tsx
// Automated backup scheduling
<mat-form-field>
  <mat-label>Daily Backup Time</mat-label>
  <input matInput [matTimepicker]="backupPicker" formControlName="backupTime" required>
  <mat-timepicker-toggle matSuffix [for]="backupPicker"></mat-timepicker-toggle>
  <mat-timepicker
    #backupPicker
    format="24"
    [interval]="60"
    defaultTime="02:00">
  </mat-timepicker>
  <mat-hint>Backup will run daily at the specified time</mat-hint>
</mat-form-field>
```
